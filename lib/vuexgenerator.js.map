{"version":3,"file":"vuexgenerator.js","sources":["vuexgenerator.js"],"sourcesContent":["\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __rest = (this && this.__rest) || function (s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useActions = exports.useMutations = exports.useState = exports.cleanMixin = exports.mapMutations = exports.mapActions = exports.mapState = void 0;\r\nvar vuex_1 = require(\"vuex\");\r\nvar vue_1 = require(\"vue\");\r\n// @ts-ignore\r\nvar $store;\r\nvar $serviceConfig;\r\nvar $modules;\r\n/**\r\n * createActions\r\n * @param namespace\r\n * @param service\r\n * @param serviceKeys\r\n */\r\nfunction createActions(_a) {\r\n    var namespace = _a.namespace, service = _a.service, serviceKeys = _a.serviceKeys;\r\n    var actions = {};\r\n    var _loop_1 = function (i) {\r\n        var key = serviceKeys[i];\r\n        if (key === 'default')\r\n            return \"continue\";\r\n        /**\r\n         * action\r\n         * @param context\r\n         * @param payload\r\n         */\r\n        actions[key] = function (_a, payload) {\r\n            var commit = _a.commit, state = _a.state;\r\n            return new Promise(function (resolve, reject) {\r\n                // 设置loading为true\r\n                commit('loading/receive', { key: \"\".concat(namespace, \"/\").concat(key), value: true }, { root: true });\r\n                service[key]\r\n                    .call(payload)\r\n                    .then(function (response) {\r\n                    var _a = service.default, codeKey = _a.codeKey, codeSuccessKey = _a.codeSuccessKey, dataKey = _a.dataKey;\r\n                    if (response[codeKey] === codeSuccessKey) {\r\n                        // 向数据流里放入Service的方法名为key,response[dataKey]为值的数据\r\n                        // commit('receive', { ...state, [key]: response[dataKey] });\r\n                        commit(\"\".concat(namespace, \"/receive\"), { key: key, value: response[dataKey] }, { root: true });\r\n                        // 更新loading为false\r\n                        commit('loading/receive', { key: \"\".concat(namespace, \"/\").concat(key), value: false }, { root: true });\r\n                        resolve(response);\r\n                    }\r\n                })\r\n                    .catch(function (response) {\r\n                    reject(response);\r\n                });\r\n            });\r\n        };\r\n    };\r\n    for (var i = 0; i < serviceKeys.length; i++) {\r\n        _loop_1(i);\r\n    }\r\n    return actions;\r\n}\r\n/**\r\n * registerLoading\r\n */\r\nfunction registerLoading() {\r\n    // state\r\n    var _state = {\r\n        global: false,\r\n    };\r\n    // service的属性\r\n    var namespaces = Object.keys($modules);\r\n    var _loop_2 = function (i) {\r\n        // _state[namespaces[i]] = false;\r\n        var namespace = namespaces[i];\r\n        // service的实例\r\n        var Service = $serviceConfig[namespace];\r\n        var serviceKeys = Object.keys(Service);\r\n        serviceKeys.forEach(function (key) {\r\n            if (key !== 'default') {\r\n                _state[\"\".concat(namespace, \"/\").concat(key)] = false;\r\n            }\r\n        });\r\n    };\r\n    for (var i = 0; i < namespaces.length; i++) {\r\n        _loop_2(i);\r\n    }\r\n    // 动态注册loading模块\r\n    $store.registerModule('loading', {\r\n        // 开启命名空间\r\n        namespaced: true,\r\n        // @ts-ignore\r\n        state: _state,\r\n        mutations: {\r\n            receive: function (state, _a) {\r\n                var key = _a.key, value = _a.value;\r\n                state[key] = value;\r\n                var global = state.global, others = __rest(state, [\"global\"]);\r\n                var globalLoading = false;\r\n                var props = Object.keys(others);\r\n                for (var i = 0; i < props.length; i++) {\r\n                    var prop = props[i];\r\n                    if (others[prop]) {\r\n                        globalLoading = true;\r\n                        break;\r\n                    }\r\n                }\r\n                state.global = globalLoading;\r\n                // console.log('key', key);\r\n                // console.log('value', value);\r\n                // console.log('globalLoading', globalLoading);\r\n                // console.log('state', state);\r\n            },\r\n        },\r\n    });\r\n}\r\n/**\r\n * registerBusinessModules\r\n */\r\nfunction registerBusinessModules() {\r\n    // 获取所有模块的命名空间\r\n    var namespaces = Object.keys($modules);\r\n    var _loop_3 = function (i) {\r\n        // 命名空间\r\n        var namespace = namespaces[i];\r\n        // module的缺省对象\r\n        var module_1 = $modules[namespace];\r\n        // service的实例\r\n        var Service = $serviceConfig[namespace];\r\n        var serviceKeys = Object.keys(Service);\r\n        var defaultState = {};\r\n        serviceKeys.forEach(function (key) {\r\n            if (key !== 'default') {\r\n                defaultState[key] = {\r\n                    value: Service[key].defaultResult(),\r\n                };\r\n            }\r\n        });\r\n        // 动态模块注册\r\n        $store.registerModule(namespace, {\r\n            // 开启命名空间\r\n            namespaced: true,\r\n            state: function () {\r\n                var _a;\r\n                return (__assign(__assign({}, defaultState), (((_a = (module_1 || {})) === null || _a === void 0 ? void 0 : _a.state) || {})));\r\n            },\r\n            /**\r\n             * {\r\n             *    fetchList:{\r\n             *        value: {\r\n             *            total: 10,\r\n             *            records: []\r\n             *        }\r\n             *    }\r\n             * }\r\n             */\r\n            mutations: __assign({ receive: function (state, _a) {\r\n                    var key = _a.key, value = _a.value;\r\n                    if (!key)\r\n                        return;\r\n                    state[key].value = value;\r\n                } }, ((module_1 || {}).mutations || {})),\r\n            getters: __assign({}, ((module_1 || {}).getters || {})),\r\n            actions: __assign(__assign({}, createActions({ namespace: namespace, service: Service, serviceKeys: serviceKeys })), ((module_1 || {}).actions || {})),\r\n        });\r\n    };\r\n    for (var i = 0; i < namespaces.length; i++) {\r\n        _loop_3(i);\r\n    }\r\n}\r\n/**\r\n * formatKey 转换第一个字符为大写\r\n * @param key\r\n * @return string\r\n */\r\nfunction formatKey(key) {\r\n    var firstChart = key.charAt(0);\r\n    return \"\".concat(firstChart.toUpperCase()).concat(key.substring(1));\r\n}\r\n/**\r\n * mapState\r\n * @param namespaces\r\n * @return object\r\n */\r\nvar mapState = function (namespaces) {\r\n    var states = {\r\n        loading: function (state) { return state.loading; },\r\n    };\r\n    var _loop_4 = function (i) {\r\n        var namespace = namespaces[i];\r\n        // service的实例\r\n        var Service = $serviceConfig[namespace];\r\n        var serviceKeys = Object.keys(Service);\r\n        var _loop_5 = function (j) {\r\n            var key = serviceKeys[j];\r\n            if (key === 'default')\r\n                return \"continue\";\r\n            states[\"\".concat(namespace).concat(formatKey(key))] = function (state) { return state[namespace][key].value; };\r\n        };\r\n        for (var j = 0; j < serviceKeys.length; j++) {\r\n            _loop_5(j);\r\n        }\r\n    };\r\n    for (var i = 0; i < namespaces.length; i++) {\r\n        _loop_4(i);\r\n    }\r\n    return (0, vuex_1.mapState)(states);\r\n};\r\nexports.mapState = mapState;\r\n/**\r\n * mapActions\r\n * @param namespaces\r\n * @return object\r\n */\r\nvar mapActions = function (namespaces) {\r\n    var actions = {};\r\n    for (var i = 0; i < namespaces.length; i++) {\r\n        var namespace = namespaces[i];\r\n        // service的实例\r\n        var Service = $serviceConfig[namespace];\r\n        var serviceKeys = Object.keys(Service);\r\n        for (var j = 0; j < serviceKeys.length; j++) {\r\n            var key = serviceKeys[j];\r\n            if (key === 'default')\r\n                continue;\r\n            actions[\"\".concat(namespace).concat(formatKey(key), \"Action\")] = \"\".concat(namespace, \"/\").concat(key);\r\n        }\r\n    }\r\n    return (0, vuex_1.mapActions)(actions);\r\n};\r\nexports.mapActions = mapActions;\r\n/**\r\n * mapMutations\r\n * @param namespaces\r\n * @return object\r\n */\r\nvar mapMutations = function (namespaces) {\r\n    var mutations = {};\r\n    for (var i = 0; i < namespaces.length; i++) {\r\n        var namespace = namespaces[i];\r\n        mutations[\"\".concat(namespace, \"ReceiveMutation\")] = \"\".concat(namespace, \"/receive\");\r\n    }\r\n    return (0, vuex_1.mapMutations)(mutations);\r\n};\r\nexports.mapMutations = mapMutations;\r\n/**\r\n * cleanMixin - 在组件销毁之前重置所用的namespace的数据流为初始化数据\r\n * @param namespaces\r\n * @return function\r\n */\r\nvar cleanMixin = function (namespaces) {\r\n    return {\r\n        /**\r\n         * beforeMount - 重置namespaces数据流的数据\r\n         */\r\n        beforeMount: function () {\r\n            var _this = this;\r\n            namespaces.forEach(function (namespace) {\r\n                var Service = $serviceConfig[namespace];\r\n                var serviceKeys = Object.keys(Service);\r\n                var defaultState = {};\r\n                serviceKeys.forEach(function (key) {\r\n                    if (key !== 'default') {\r\n                        defaultState[key] = Service[key].defaultResult();\r\n                    }\r\n                });\r\n                Object.keys(defaultState).forEach(function (key) {\r\n                    // @ts-ignore\r\n                    _this.$store.commit(\"\".concat(namespace, \"/receive\"), { key: key, value: defaultState[key] });\r\n                });\r\n            });\r\n        },\r\n    };\r\n};\r\nexports.cleanMixin = cleanMixin;\r\n/**\r\n * useState\r\n * @description 支持setup的useState\r\n * @param namespaces\r\n */\r\nvar useState = function (namespaces) {\r\n    var store = $store;\r\n    var states = {\r\n        loading: (0, vue_1.computed)(function () { return store.state.loading; }),\r\n    };\r\n    for (var i = 0; i < namespaces.length; i++) {\r\n        var namespace = namespaces[i];\r\n        // service的实例\r\n        var Service = $serviceConfig[namespace];\r\n        var serviceKeys = Object.keys(Service);\r\n        for (var j = 0; j < serviceKeys.length; j++) {\r\n            var key = serviceKeys[j];\r\n            if (key === 'default')\r\n                continue;\r\n            // const keyComputed = computed(() => store.state[namespace][key]);\r\n            //\r\n            // states[`${namespace}${formatKey(key)}`] = toRef(keyComputed.value, 'value');\r\n            states[\"\".concat(namespace).concat(formatKey(key))] = (0, vue_1.toRef)(store.state[namespace][key], 'value');\r\n        }\r\n    }\r\n    return states;\r\n};\r\nexports.useState = useState;\r\n/**\r\n * useMutations\r\n * @description 支持setup的useMutations\r\n * @param namespaces\r\n */\r\nvar useMutations = function (namespaces) {\r\n    var store = $store;\r\n    var mutations = {};\r\n    var _loop_6 = function (i) {\r\n        var namespace = namespaces[i];\r\n        mutations[\"\".concat(namespace, \"ReceiveMutation\")] = function (payload) {\r\n            return store.commit(\"\".concat(namespace, \"/receive\"), payload);\r\n        };\r\n    };\r\n    for (var i = 0; i < namespaces.length; i++) {\r\n        _loop_6(i);\r\n    }\r\n    return mutations;\r\n};\r\nexports.useMutations = useMutations;\r\n/**\r\n * useActions\r\n * @description 支持setup的useActions\r\n * @param namespaces\r\n */\r\nvar useActions = function (namespaces) {\r\n    var store = $store;\r\n    var actions = {};\r\n    var _loop_7 = function (i) {\r\n        var namespace = namespaces[i];\r\n        // service的实例\r\n        var Service = $serviceConfig[namespace];\r\n        var serviceKeys = Object.keys(Service);\r\n        var _loop_8 = function (j) {\r\n            var key = serviceKeys[j];\r\n            if (key === 'default')\r\n                return \"continue\";\r\n            actions[\"\".concat(namespace).concat(formatKey(key), \"Action\")] = function (payload) {\r\n                return store.dispatch(\"\".concat(namespace, \"/\").concat(key), payload);\r\n            };\r\n        };\r\n        for (var j = 0; j < serviceKeys.length; j++) {\r\n            _loop_8(j);\r\n        }\r\n    };\r\n    for (var i = 0; i < namespaces.length; i++) {\r\n        _loop_7(i);\r\n    }\r\n    return actions;\r\n};\r\nexports.useActions = useActions;\r\n/**\r\n * plugin\r\n * @param serviceConfig - service的配置\r\n * @param modules - 模块的配置\r\n * @return Function\r\n */\r\nexports.default = (function (serviceConfig, modules) {\r\n    $serviceConfig = serviceConfig;\r\n    $modules = modules;\r\n    /**\r\n     * vuex的一个VuexGenerator插件\r\n     * @param context\r\n     */\r\n    // @ts-ignore\r\n    return function (store) {\r\n        // 获取vuex的store对象\r\n        $store = store;\r\n        // 创建loading的module\r\n        registerLoading();\r\n        // 根据serviceConfig配置自动生成module配置\r\n        registerBusinessModules();\r\n    };\r\n});\r\n"],"names":["$store","$serviceConfig","$modules","__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","vuex_1","defineProperty","exports","value","useActions","useMutations","useState","cleanMixin","mapMutations","mapActions","mapState","require","vue_1","createActions","_a","namespace","service","serviceKeys","actions","key","payload","commit","state","Promise","resolve","reject","concat","root","then","response","default","codeKey","codeSuccessKey","dataKey","catch","_loop_1","registerLoading","_state","global","namespaces","keys","Service","forEach","_loop_2","registerModule","namespaced","mutations","receive","others","globalLoading","props","registerBusinessModules","module_1","defaultState","defaultResult","getters","_loop_3","formatKey","firstChart","charAt","toUpperCase","substring","states","loading","_loop_4","j","_loop_5","beforeMount","_this","store","computed","toRef","_loop_6","_loop_7","dispatch","_loop_8","serviceConfig","modules"],"mappings":"aACA,IA2BIA,OACAC,eACAC,SA7BAC,SAAYC,MAAQA,KAAKD,UAAa,WAStC,OARAA,SAAWE,OAAOC,QAAU,SAASC,GACjC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAE5C,IAAK,IAAII,KADTL,EAAIG,UAAUF,GACOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,KACzDN,EAAEM,GAAKL,EAAEK,IAEjB,OAAON,IAEKU,MAAMb,KAAMO,YAE5BO,OAAUd,MAAQA,KAAKc,QAAW,SAAUV,EAAGW,GAC/C,IAAIZ,EAAI,GACR,IAASM,KAAKL,EAAOH,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,IAAMM,EAAEC,QAAQP,GAAK,IAC9EN,EAAEM,GAAKL,EAAEK,IACb,GAAS,MAALL,GAAqD,mBAAjCH,OAAOgB,sBAC3B,IAAK,IAAIZ,EAAI,EAAGI,EAAIR,OAAOgB,sBAAsBb,GAAIC,EAAII,EAAED,OAAQH,IAC3DU,EAAEC,QAAQP,EAAEJ,IAAM,GAAKJ,OAAOS,UAAUQ,qBAAqBN,KAAKR,EAAGK,EAAEJ,MACvEF,EAAEM,EAAEJ,IAAMD,EAAEK,EAAEJ,KAE1B,OAAOF,GAIPgB,QAFJlB,OAAOmB,eAAeC,QAAS,aAAc,CAAEC,OAAO,IACtDD,QAAQE,WAAaF,QAAQG,aAAeH,QAAQI,SAAWJ,QAAQK,WAAaL,QAAQM,aAAeN,QAAQO,WAAaP,QAAQQ,cAAW,EACtIC,QAAQ,SACjBC,MAAQD,QAAQ,OAWpB,SAASE,cAAcC,GAoCnB,IAnCA,IAAIC,EAAYD,EAAGC,UAAWC,EAAUF,EAAGE,QAASC,EAAcH,EAAGG,YACjEC,EAAU,GAkCLhC,EAAI,EAAGA,EAAI+B,EAAY5B,OAAQH,KAjC1B,SAAUA,GACpB,IAAIiC,EAAMF,EAAY/B,GACtB,GAAY,YAARiC,EACA,OAMJD,EAAQC,GAAO,SAAUL,EAAIM,GACzB,IAAIC,EAASP,EAAGO,OAAgBP,EAAGQ,MACnC,OAAO,IAAIC,QAAQ,SAAUC,EAASC,GAElCJ,EAAO,kBAAmB,CAAEF,IAAK,GAAGO,OAAOX,EAAW,KAAKW,OAAOP,GAAMhB,OAAO,GAAQ,CAAEwB,MAAM,IAC/FX,EAAQG,GACH1B,KAAK2B,GACLQ,KAAK,SAAUC,GAChB,IAAIf,EAAKE,EAAQc,QAASC,EAAUjB,EAAGiB,QAASC,EAAiBlB,EAAGkB,eAAgBC,EAAUnB,EAAGmB,QAC7FJ,EAASE,KAAaC,IAGtBX,EAAO,GAAGK,OAAOX,EAAW,YAAa,CAAEI,IAAKA,EAAKhB,MAAO0B,EAASI,IAAY,CAAEN,MAAM,IAEzFN,EAAO,kBAAmB,CAAEF,IAAK,GAAGO,OAAOX,EAAW,KAAKW,OAAOP,GAAMhB,OAAO,GAAS,CAAEwB,MAAM,IAChGH,EAAQK,MAGXK,MAAM,SAAUL,GACjBJ,EAAOI,QAMnBM,CAAQjD,GAEZ,OAAOgC,EAKX,SAASkB,kBAmBL,IAjBA,IAAIC,EAAS,CACTC,QAAQ,GAGRC,EAAazD,OAAO0D,KAAK7D,UAapBO,EAAI,EAAGA,EAAIqD,EAAWlD,OAAQH,KAZzB,SAAUA,GAEpB,IAAI6B,EAAYwB,EAAWrD,GAEvBuD,EAAU/D,eAAeqC,GACXjC,OAAO0D,KAAKC,GAClBC,QAAQ,SAAUvB,GACd,YAARA,IACAkB,EAAO,GAAGX,OAAOX,EAAW,KAAKW,OAAOP,KAAQ,KAKxDwB,CAAQzD,GAGZT,OAAOmE,eAAe,UAAW,CAE7BC,YAAY,EAEZvB,MAAOe,EACPS,UAAW,CACPC,QAAS,SAAUzB,EAAOR,GAMtB,IALA,IAAIK,EAAML,EAAGK,IAAKhB,EAAQW,EAAGX,MAEF6C,GAD3B1B,EAAMH,GAAOhB,EACAmB,EAAMgB,OAAiB3C,OAAO2B,EAAO,CAAC,YAC/C2B,GAAgB,EAChBC,EAAQpE,OAAO0D,KAAKQ,GACf9D,EAAI,EAAGA,EAAIgE,EAAM7D,OAAQH,IAE9B,GAAI8D,EADOE,EAAMhE,IACC,CACd+D,GAAgB,EAChB,MAGR3B,EAAMgB,OAASW,MAY/B,SAASE,0BA+CL,IA7CA,IAAIZ,EAAazD,OAAO0D,KAAK7D,UA6CpBO,EAAI,EAAGA,EAAIqD,EAAWlD,OAAQH,KA5CzB,SAAUA,GAEpB,IAAI6B,EAAYwB,EAAWrD,GAEvBkE,EAAWzE,SAASoC,GAEpB0B,EAAU/D,eAAeqC,GACzBE,EAAcnC,OAAO0D,KAAKC,GAC1BY,EAAe,GACnBpC,EAAYyB,QAAQ,SAAUvB,GACd,YAARA,IACAkC,EAAalC,GAAO,CAChBhB,MAAOsC,EAAQtB,GAAKmC,oBAKhC7E,OAAOmE,eAAe7B,EAAW,CAE7B8B,YAAY,EACZvB,MAAO,WACH,IAAIR,EACJ,OAAQlC,SAASA,SAAS,GAAIyE,IAA6C,QAA3BvC,EAAMsC,GAAY,SAAiC,EAAStC,EAAGQ,QAAU,KAY7HwB,UAAWlE,SAAS,CAAEmE,QAAS,SAAUzB,EAAOR,GACxC,IAAIK,EAAML,EAAGK,IAAKhB,EAAQW,EAAGX,MACxBgB,IAELG,EAAMH,GAAKhB,MAAQA,MAChBiD,GAAY,IAAIN,WAAa,IACxCS,QAAS3E,SAAS,IAAMwE,GAAY,IAAIG,SAAW,IACnDrC,QAAStC,SAASA,SAAS,GAAIiC,cAAc,CAAEE,UAAWA,EAAWC,QAASyB,EAASxB,YAAaA,MAAmBmC,GAAY,IAAIlC,SAAW,MAItJsC,CAAQtE,GAQhB,SAASuE,UAAUtC,GACf,IAAIuC,EAAavC,EAAIwC,OAAO,GAC5B,MAAO,GAAGjC,OAAOgC,EAAWE,eAAelC,OAAOP,EAAI0C,UAAU,IAOpE,IAAInD,SAAW,SAAU6B,GAmBrB,IAlBA,IAAIuB,EAAS,CACTC,QAAS,SAAUzC,GAAS,OAAOA,EAAMyC,UAEzCC,EAAU,SAAU9E,GAWpB,IAVA,IAAI6B,EAAYwB,EAAWrD,GAEvBuD,EAAU/D,eAAeqC,GACzBE,EAAcnC,OAAO0D,KAAKC,GAOrBwB,EAAI,EAAGA,EAAIhD,EAAY5B,OAAQ4E,KAN1B,SAAUA,GACpB,IAAI9C,EAAMF,EAAYgD,GACtB,GAAY,YAAR9C,EACA,OACJ2C,EAAO,GAAGpC,OAAOX,GAAWW,OAAO+B,UAAUtC,KAAS,SAAUG,GAAS,OAAOA,EAAMP,GAAWI,GAAKhB,OAGtG+D,CAAQD,IAGP/E,EAAI,EAAGA,EAAIqD,EAAWlD,OAAQH,IACnC8E,EAAQ9E,GAEZ,OAAO,EAAIc,OAAOU,UAAUoD,IAQ5BrD,YANJP,QAAQQ,SAAWA,SAMF,SAAU6B,GAEvB,IADA,IAAIrB,EAAU,GACLhC,EAAI,EAAGA,EAAIqD,EAAWlD,OAAQH,IAKnC,IAJA,IAAI6B,EAAYwB,EAAWrD,GAEvBuD,EAAU/D,eAAeqC,GACzBE,EAAcnC,OAAO0D,KAAKC,GACrBwB,EAAI,EAAGA,EAAIhD,EAAY5B,OAAQ4E,IAAK,CACzC,IAAI9C,EAAMF,EAAYgD,GACV,YAAR9C,IAEJD,EAAQ,GAAGQ,OAAOX,GAAWW,OAAO+B,UAAUtC,GAAM,WAAa,GAAGO,OAAOX,EAAW,KAAKW,OAAOP,IAG1G,OAAO,EAAInB,OAAOS,YAAYS,KAQ9BV,cANJN,QAAQO,WAAaA,WAMF,SAAU8B,GAEzB,IADA,IAAIO,EAAY,GACP5D,EAAI,EAAGA,EAAIqD,EAAWlD,OAAQH,IAAK,CACxC,IAAI6B,EAAYwB,EAAWrD,GAC3B4D,EAAU,GAAGpB,OAAOX,EAAW,oBAAsB,GAAGW,OAAOX,EAAW,YAE9E,OAAO,EAAIf,OAAOQ,cAAcsC,KAQhCvC,YANJL,QAAQM,aAAeA,aAMN,SAAU+B,GACvB,MAAO,CAIH4B,YAAa,WACT,IAAIC,EAAQvF,KACZ0D,EAAWG,QAAQ,SAAU3B,GACzB,IAAI0B,EAAU/D,eAAeqC,GACzBE,EAAcnC,OAAO0D,KAAKC,GAC1BY,EAAe,GACnBpC,EAAYyB,QAAQ,SAAUvB,GACd,YAARA,IACAkC,EAAalC,GAAOsB,EAAQtB,GAAKmC,mBAGzCxE,OAAO0D,KAAKa,GAAcX,QAAQ,SAAUvB,GAExCiD,EAAM3F,OAAO4C,OAAO,GAAGK,OAAOX,EAAW,YAAa,CAAEI,IAAKA,EAAKhB,MAAOkD,EAAalC,aAYtGb,UANJJ,QAAQK,WAAaA,WAMN,SAAUgC,GAKrB,IAJA,IAAI8B,EAAQ5F,OACRqF,EAAS,CACTC,SAAS,EAAInD,MAAM0D,UAAU,WAAc,OAAOD,EAAM/C,MAAMyC,WAEzD7E,EAAI,EAAGA,EAAIqD,EAAWlD,OAAQH,IAKnC,IAJA,IAAI6B,EAAYwB,EAAWrD,GAEvBuD,EAAU/D,eAAeqC,GACzBE,EAAcnC,OAAO0D,KAAKC,GACrBwB,EAAI,EAAGA,EAAIhD,EAAY5B,OAAQ4E,IAAK,CACzC,IAAI9C,EAAMF,EAAYgD,GACV,YAAR9C,IAKJ2C,EAAO,GAAGpC,OAAOX,GAAWW,OAAO+B,UAAUtC,MAAS,EAAIP,MAAM2D,OAAOF,EAAM/C,MAAMP,GAAWI,GAAM,UAG5G,OAAO2C,IAQPzD,cANJH,QAAQI,SAAWA,SAMA,SAAUiC,GASzB,IARA,IAAI8B,EAAQ5F,OACRqE,EAAY,GAOP5D,EAAI,EAAGA,EAAIqD,EAAWlD,OAAQH,KANzB,SAAUA,GACpB,IAAI6B,EAAYwB,EAAWrD,GAC3B4D,EAAU,GAAGpB,OAAOX,EAAW,oBAAsB,SAAUK,GAC3D,OAAOiD,EAAMhD,OAAO,GAAGK,OAAOX,EAAW,YAAaK,IAI1DoD,CAAQtF,GAEZ,OAAO4D,IAQP1C,YANJF,QAAQG,aAAeA,aAMN,SAAUkC,GAoBvB,IAnBA,IAAI8B,EAAQ5F,OACRyC,EAAU,GACVuD,EAAU,SAAUvF,GAapB,IAZA,IAAI6B,EAAYwB,EAAWrD,GAEvBuD,EAAU/D,eAAeqC,GACzBE,EAAcnC,OAAO0D,KAAKC,GASrBwB,EAAI,EAAGA,EAAIhD,EAAY5B,OAAQ4E,KAR1B,SAAUA,GACpB,IAAI9C,EAAMF,EAAYgD,GACtB,GAAY,YAAR9C,EACA,OACJD,EAAQ,GAAGQ,OAAOX,GAAWW,OAAO+B,UAAUtC,GAAM,WAAa,SAAUC,GACvE,OAAOiD,EAAMK,SAAS,GAAGhD,OAAOX,EAAW,KAAKW,OAAOP,GAAMC,IAIjEuD,CAAQV,IAGP/E,EAAI,EAAGA,EAAIqD,EAAWlD,OAAQH,IACnCuF,EAAQvF,GAEZ,OAAOgC,IAEXhB,QAAQE,WAAaA,WAOrBF,QAAQ4B,QAAU,SAAW8C,EAAeC,GAQxC,OAPAnG,eAAiBkG,EACjBjG,SAAWkG,EAMJ,SAAUR,GAEb5F,OAAS4F,EAETjC,kBAEAe"}