"use strict";var $store,$serviceConfig,$modules,__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__rest=this&&this.__rest||function(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n},vuex_1=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.useActions=exports.useMutations=exports.useState=exports.cleanMixin=exports.mapMutations=exports.mapActions=exports.mapState=void 0,require("vuex")),vue_1=require("vue");function createActions(e){for(var a=e.namespace,u=e.service,t=e.serviceKeys,n={},r=0;r<t.length;r++)!function(e){var s=t[e];if("default"===s)return;n[s]=function(e,n){var i=e.commit;e.state;return new Promise(function(o,t){i("loading/receive",{key:a+"/"+s,value:!0},{root:!0}),u[s].call(n).then(function(e){var t=u.default,n=t.codeKey,r=t.codeSuccessKey,t=t.dataKey;e[n]===r&&(i(a+"/receive",{key:s,value:e[t]},{root:!0}),i("loading/receive",{key:a+"/"+s,value:!1},{root:!0}),o(e))}).catch(function(e){t(e)})})}}(r);return n}function registerLoading(){for(var n={global:!1},r=Object.keys($modules),e=0;e<r.length;e++)!function(e){var t=r[e],e=$serviceConfig[t];Object.keys(e).forEach(function(e){"default"!==e&&(n[t+"/"+e]=!1)})}(e);$store.registerModule("loading",{namespaced:!0,state:n,mutations:{receive:function(e,t){for(var n=t.key,t=t.value,r=(e[n]=t,e.global,__rest(e,["global"])),o=!1,i=Object.keys(r),s=0;s<i.length;s++)if(r[i[s]]){o=!0;break}e.global=o}}})}function registerBusinessModules(){for(var i=Object.keys($modules),e=0;e<i.length;e++)!function(e){var e=i[e],t=$modules[e],n=$serviceConfig[e],r=Object.keys(n),o={};r.forEach(function(e){"default"!==e&&(o[e]={value:n[e].defaultResult()})}),$store.registerModule(e,{namespaced:!0,state:function(){var e;return __assign(__assign({},o),(null===(e=t||{})?void 0:e.state)||{})},mutations:__assign({receive:function(e,t){var n=t.key,t=t.value;n&&(e[n].value=t)}},(t||{}).mutations||{}),getters:__assign({},(t||{}).getters||{}),actions:__assign(__assign({},createActions({namespace:e,service:n,serviceKeys:r})),(t||{}).actions||{})})}(e)}function formatKey(e){return""+e.charAt(0).toUpperCase()+e.substring(1)}exports.mapState=function(o){for(var i={loading:function(e){return e.loading}},e=function(e){for(var n=o[e],e=$serviceConfig[n],r=Object.keys(e),t=0;t<r.length;t++)!function(e){var t=r[e];if("default"===t)return;i[""+n+formatKey(t)]=function(e){return e[n][t].value}}(t)},t=0;t<o.length;t++)e(t);return vuex_1.mapState(i)},exports.mapActions=function(e){for(var t={},n=0;n<e.length;n++)for(var r=e[n],o=$serviceConfig[r],i=Object.keys(o),s=0;s<i.length;s++){var a=i[s];"default"!==a&&(t[""+r+formatKey(a)+"Action"]=r+"/"+a)}return vuex_1.mapActions(t)},exports.mapMutations=function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];t[r+"ReceiveMutation"]=r+"/receive"}return vuex_1.mapMutations(t)},exports.cleanMixin=function(e){return{beforeMount:function(){var o=this;e.forEach(function(e){var t=$serviceConfig[e],n=Object.keys(t),r={};n.forEach(function(e){"default"!==e&&(r[e]=t[e].defaultResult())}),o.$store.commit(e+"/receive",r)})}}},exports.useState=function(o){for(var i=$store,s={loading:vue_1.computed(function(){return i.state.loading})},e=function(e){for(var n=o[e],e=$serviceConfig[n],r=Object.keys(e),t=0;t<r.length;t++)!function(e){var t=r[e];if("default"===t)return;e=vue_1.computed(function(){return i.state[n][t]});s[""+n+formatKey(t)]=vue_1.toRef(e.value,"value")}(t)},t=0;t<o.length;t++)e(t);return s},exports.useMutations=function(n){for(var r=$store,o={},e=0;e<n.length;e++)!function(e){var t=n[e];o[t+"ReceiveMutation"]=function(e){return r.commit(t+"/receive",e)}}(e);return o},exports.useActions=function(o){for(var i=$store,s={},e=function(e){for(var n=o[e],e=$serviceConfig[n],r=Object.keys(e),t=0;t<r.length;t++)!function(e){var t=r[e];if("default"===t)return;s[""+n+formatKey(t)+"Action"]=function(e){return i.dispatch(n+"/"+t,e)}}(t)},t=0;t<o.length;t++)e(t);return s},exports.default=function(e,t){return $serviceConfig=e,$modules=t,function(e){$store=e,registerLoading(),registerBusinessModules()}};
//# sourceMappingURL=vuexgenerator.js.map
