var $store,$serviceConfig,$modules,__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},__rest=this&&this.__rest||function(e,t){var n={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n};import{mapActions as mappingActions,mapState as mappingState,mapMutations as mappingMutations}from"vuex";function createActions(e){for(var c=e.namespace,u=e.service,t=e.serviceKeys,n={},r=0;r<t.length;r++)!function(e){var s=t[e];if("default"===s)return;n[s]=function(e,n){var o=e.commit,i=e.state;return new Promise(function(a,t){o("loading/receive",{key:c+"/"+s,value:!0},{root:!0}),u[s].call(n).then(function(e){var t=u.default,n=t.codeKey,r=t.codeSuccessKey,t=t.dataKey;e[n]===r&&(o("receive",__assign(__assign({},i),((r={})[s]=e[t],r))),o("loading/receive",{key:c+"/"+s,value:!1},{root:!0}),a(e))}).catch(function(e){t(e)})})}}(r);return n}function registerLoading(){for(var n={global:!1},r=Object.keys($modules),e=0;e<r.length;e++)!function(e){var t=r[e],e=$serviceConfig[t];Object.keys(e).forEach(function(e){"default"!==e&&(n[t+"/"+e]=!1)})}(e);$store.registerModule("loading",{namespaced:!0,state:n,mutations:{receive:function(e,t){var n=t.key,t=t.value;e[n]=t;e.global;for(var r=__rest(e,["global"]),a=!1,o=Object.keys(r),i=0;i<o.length;i++)if(r[o[i]]){a=!0;break}e.global=a}}})}function registerBusinessModules(){for(var o=Object.keys($modules),e=0;e<o.length;e++)!function(e){var t=o[e],n=$modules[t],r=$serviceConfig[t],e=Object.keys(r),a={};e.forEach(function(e){"default"!==e&&(a[e]=r[e].defaultResult())}),$store.registerModule(t,{namespaced:!0,state:function(){return __assign(__assign({},a),(n||{}).state||{})},mutations:__assign({receive:function(e,t){for(var n=Object.keys(e),r=0;r<n.length;r++){var a=n[r];e[a]=t[a]}}},(n||{}).mutations||{}),getters:__assign({},(n||{}).getters||{}),actions:__assign(__assign({},createActions({namespace:t,service:r,serviceKeys:e})),(n||{}).actions||{})})}(e)}function formatKey(e){return""+e.charAt(0).toUpperCase()+e.substring(1)}var plugin=function(e,t){return $serviceConfig=e,$modules=t,function(e){$store=e,registerLoading(),registerBusinessModules()}},mapState=function(a){function e(e){for(var n=a[e],e=$serviceConfig[n],r=Object.keys(e),t=0;t<r.length;t++)!function(e){var t=r[e];if("default"===t)return;o[""+n+formatKey(t)]=function(e){return e[n][t]}}(t)}for(var o={loading:function(e){return e.loading}},t=0;t<a.length;t++)e(t);return mappingState(o)},mapActions=function(e){for(var t={},n=0;n<e.length;n++)for(var r=e[n],a=$serviceConfig[r],o=Object.keys(a),i=0;i<o.length;i++){var s=o[i];"default"!==s&&(t[""+r+formatKey(s)+"Action"]=r+"/"+s)}return mappingActions(t)},mapMutations=function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];t[r+"ReceiveMutation"]=r+"/receive"}return mappingMutations(t)};export default plugin;export{mapState,mapActions,mapMutations};
//# sourceMappingURL=vuexgenerator.js.map
