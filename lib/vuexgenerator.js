"use strict";var $store,$serviceConfig,$modules,__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},__rest=this&&this.__rest||function(e,t){var n={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},vuex_1=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.useActions=exports.useMutations=exports.useState=exports.cleanMixin=exports.mapMutations=exports.mapActions=exports.mapState=void 0,require("vuex")),vue_1=require("vue");function createActions(e){for(var i=e.namespace,s=e.service,t=e.serviceKeys,n={},o=0;o<t.length;o++)!function(e){var c=t[e];if("default"===c)return;n[c]=function(e,n){var a=e.commit;e.state;return new Promise(function(r,t){a("loading/receive",{key:"".concat(i,"/").concat(c),value:!0},{root:!0}),s[c].call(n).then(function(e){var t=s.default,n=t.codeKey,o=t.codeSuccessKey,t=t.dataKey;e[n]===o&&(a("".concat(i,"/receive"),{key:c,value:e[t]},{root:!0}),a("loading/receive",{key:"".concat(i,"/").concat(c),value:!1},{root:!0}),r(e))}).catch(function(e){t(e)})})}}(o);return n}function registerLoading(){for(var n={global:!1},o=Object.keys($modules),e=0;e<o.length;e++)!function(e){var t=o[e],e=$serviceConfig[t];Object.keys(e).forEach(function(e){"default"!==e&&(n["".concat(t,"/").concat(e)]=!1)})}(e);$store.registerModule("loading",{namespaced:!0,state:n,mutations:{receive:function(e,t){for(var n=t.key,t=t.value,o=(e[n]=t,e.global,__rest(e,["global"])),r=!1,a=Object.keys(o),c=0;c<a.length;c++)if(o[a[c]]){r=!0;break}e.global=r}}})}function registerBusinessModules(){for(var a=Object.keys($modules),e=0;e<a.length;e++)!function(e){var e=a[e],t=$modules[e],n=$serviceConfig[e],o=Object.keys(n),r={};o.forEach(function(e){"default"!==e&&(r[e]={value:n[e].defaultResult()})}),$store.registerModule(e,{namespaced:!0,state:function(){var e;return __assign(__assign({},r),(null===(e=t||{})?void 0:e.state)||{})},mutations:__assign({receive:function(e,t){var n=t.key,t=t.value;n&&(e[n].value=t)}},(t||{}).mutations||{}),getters:__assign({},(t||{}).getters||{}),actions:__assign(__assign({},createActions({namespace:e,service:n,serviceKeys:o})),(t||{}).actions||{})})}(e)}function formatKey(e){var t=e.charAt(0);return"".concat(t.toUpperCase()).concat(e.substring(1))}var mapState=function(r){for(var a={loading:function(e){return e.loading}},e=function(e){for(var n=r[e],e=$serviceConfig[n],o=Object.keys(e),t=0;t<o.length;t++)!function(e){var t=o[e];if("default"===t)return;a["".concat(n).concat(formatKey(t))]=function(e){return e[n][t].value}}(t)},t=0;t<r.length;t++)e(t);return(0,vuex_1.mapState)(a)},mapActions=(exports.mapState=mapState,function(e){for(var t={},n=0;n<e.length;n++)for(var o=e[n],r=$serviceConfig[o],a=Object.keys(r),c=0;c<a.length;c++){var i=a[c];"default"!==i&&(t["".concat(o).concat(formatKey(i),"Action")]="".concat(o,"/").concat(i))}return(0,vuex_1.mapActions)(t)}),mapMutations=(exports.mapActions=mapActions,function(e){for(var t={},n=0;n<e.length;n++){var o=e[n];t["".concat(o,"ReceiveMutation")]="".concat(o,"/receive")}return(0,vuex_1.mapMutations)(t)}),cleanMixin=(exports.mapMutations=mapMutations,function(e){return{beforeMount:function(){var r=this;e.forEach(function(t){var n=$serviceConfig[t],e=Object.keys(n),o={};e.forEach(function(e){"default"!==e&&(o[e]=n[e].defaultResult())}),Object.keys(o).forEach(function(e){r.$store.commit("".concat(t,"/receive"),{key:e,value:o[e]})})})}}}),useState=(exports.cleanMixin=cleanMixin,function(e){for(var t=$store,n={loading:(0,vue_1.computed)(function(){return t.state.loading})},o=0;o<e.length;o++)for(var r=e[o],a=$serviceConfig[r],c=Object.keys(a),i=0;i<c.length;i++){var s=c[i];"default"!==s&&(n["".concat(r).concat(formatKey(s))]=(0,vue_1.toRef)(t.state[r][s],"value"))}return n}),useMutations=(exports.useState=useState,function(n){for(var o=$store,r={},e=0;e<n.length;e++)!function(e){var t=n[e];r["".concat(t,"ReceiveMutation")]=function(e){return o.commit("".concat(t,"/receive"),e)}}(e);return r}),useActions=(exports.useMutations=useMutations,function(r){for(var a=$store,c={},e=function(e){for(var n=r[e],e=$serviceConfig[n],o=Object.keys(e),t=0;t<o.length;t++)!function(e){var t=o[e];if("default"===t)return;c["".concat(n).concat(formatKey(t),"Action")]=function(e){return a.dispatch("".concat(n,"/").concat(t),e)}}(t)},t=0;t<r.length;t++)e(t);return c});exports.useActions=useActions,exports.default=function(e,t){return $serviceConfig=e,$modules=t,function(e){$store=e,registerLoading(),registerBusinessModules()}};
//# sourceMappingURL=vuexgenerator.js.map
