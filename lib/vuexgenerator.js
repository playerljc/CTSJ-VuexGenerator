"use strict";var $store,$serviceConfig,$modules,__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__rest=this&&this.__rest||function(e,t){var r={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]]);return r},vuex_1=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.useActions=exports.useMutations=exports.useState=exports.cleanMixin=exports.mapMutations=exports.mapActions=exports.mapState=void 0,require("vuex")),vue_1=require("vue");function createActions(e){for(var a=e.namespace,u=e.service,t=e.serviceKeys,r={},n=0;n<t.length;n++)!function(e){var s=t[e];if("default"===s)return;r[s]=function(e,r){var i=e.commit;e.state;return new Promise(function(o,t){i("loading/receive",{key:a+"/"+s,value:!0},{root:!0}),u[s].call(r).then(function(e){var t=u.default,r=t.codeKey,n=t.codeSuccessKey,t=t.dataKey;e[r]===n&&(i(a+"/receive",{key:s,value:e[t]},{root:!0}),i("loading/receive",{key:a+"/"+s,value:!1},{root:!0}),o(e))}).catch(function(e){t(e)})})}}(n);return r}function registerLoading(){for(var r={global:!1},n=Object.keys($modules),e=0;e<n.length;e++)!function(e){var t=n[e],e=$serviceConfig[t];Object.keys(e).forEach(function(e){"default"!==e&&(r[t+"/"+e]=!1)})}(e);$store.registerModule("loading",{namespaced:!0,state:r,mutations:{receive:function(e,t){for(var r=t.key,t=t.value,n=(e[r]=t,e.global,__rest(e,["global"])),o=!1,i=Object.keys(n),s=0;s<i.length;s++)if(n[i[s]]){o=!0;break}e.global=o}}})}function registerBusinessModules(){for(var i=Object.keys($modules),e=0;e<i.length;e++)!function(e){var e=i[e],t=$modules[e],r=$serviceConfig[e],n=Object.keys(r),o={};n.forEach(function(e){"default"!==e&&(o[e]={value:r[e].defaultResult()})}),$store.registerModule(e,{namespaced:!0,state:function(){var e;return __assign(__assign({},o),(null===(e=t||{})?void 0:e.state)||{})},mutations:__assign({receive:function(e,t){var r=t.key,t=t.value;r&&(e[r].value=t)}},(t||{}).mutations||{}),getters:__assign({},(t||{}).getters||{}),actions:__assign(__assign({},createActions({namespace:e,service:r,serviceKeys:n})),(t||{}).actions||{})})}(e)}function formatKey(e){return""+e.charAt(0).toUpperCase()+e.substring(1)}exports.mapState=function(o){for(var i={loading:function(e){return e.loading}},e=function(e){for(var r=o[e],e=$serviceConfig[r],n=Object.keys(e),t=0;t<n.length;t++)!function(e){var t=n[e];if("default"===t)return;i[""+r+formatKey(t)]=function(e){return e[r][t].value}}(t)},t=0;t<o.length;t++)e(t);return vuex_1.mapState(i)},exports.mapActions=function(e){for(var t={},r=0;r<e.length;r++)for(var n=e[r],o=$serviceConfig[n],i=Object.keys(o),s=0;s<i.length;s++){var a=i[s];"default"!==a&&(t[""+n+formatKey(a)+"Action"]=n+"/"+a)}return vuex_1.mapActions(t)},exports.mapMutations=function(e){for(var t={},r=0;r<e.length;r++){var n=e[r];t[n+"ReceiveMutation"]=n+"/receive"}return vuex_1.mapMutations(t)},exports.cleanMixin=function(e){return{beforeMount:function(){var o=this;e.forEach(function(e){var t=$serviceConfig[e],r=Object.keys(t),n={};r.forEach(function(e){"default"!==e&&(n[e]=t[e].defaultResult())}),o.$store.commit(e+"/receive",n)})}}},exports.useState=function(e){for(var t=$store,r={loading:vue_1.computed(function(){return t.state.loading})},n=0;n<e.length;n++)for(var o=e[n],i=$serviceConfig[o],s=Object.keys(i),a=0;a<s.length;a++){var u=s[a];"default"!==u&&(r[""+o+formatKey(u)]=vue_1.toRef(t.state[o][u],"value"))}return r},exports.useMutations=function(r){for(var n=$store,o={},e=0;e<r.length;e++)!function(e){var t=r[e];o[t+"ReceiveMutation"]=function(e){return n.commit(t+"/receive",e)}}(e);return o},exports.useActions=function(o){for(var i=$store,s={},e=function(e){for(var r=o[e],e=$serviceConfig[r],n=Object.keys(e),t=0;t<n.length;t++)!function(e){var t=n[e];if("default"===t)return;s[""+r+formatKey(t)+"Action"]=function(e){return i.dispatch(r+"/"+t,e)}}(t)},t=0;t<o.length;t++)e(t);return s},exports.default=function(e,t){return $serviceConfig=e,$modules=t,function(e){$store=e,registerLoading(),registerBusinessModules()}};
//# sourceMappingURL=vuexgenerator.js.map
